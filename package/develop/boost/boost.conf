# --- T2-COPYRIGHT-NOTE-BEGIN ---
# T2 SDE: package/*/boost/boost.conf
# Copyright (C) 2004 - 2024 The T2 SDE Project
# 
# This Copyright note is generated by scripts/Create-CopyPatch,
# more information can be found in the files COPYING and README.
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License version 2.
# --- T2-COPYRIGHT-NOTE-END ---

runconf=0
runmake=0

# otherwise rebuilding boost does not reinstall static files
var_insert taropt ' ' -m

b2opt="-j$SDECFG_PARALLEL_MAX"

cross_boost_config() {
	# TODO: get it built w/o the -xxx toolset
	echo "using gcc : xxx : $CXX ;" >> project-config.jam
}

if atstage cross; then
	b2opt="toolset=gcc-xxx $b2opt"
	hook_add premake 5 "cross_boost_config"
else
	b2opt="toolset=gcc $b2opt"
fi

hook_add preconf 5 "./bootstrap.sh --without-libraries=python"
hook_add inmake 5 "./b2 $b2opt --prefix=/$prefix --libdir=$libdir --includedir=$includedir"
hook_add postmake 5 "./b2 $b2opt --libdir=$root$libdir --includedir=$root$includedir install"
